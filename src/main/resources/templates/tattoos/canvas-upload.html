<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Sign up</title>
    <head th:replace=" partials/head :: head"/>
    <link rel="stylesheet" th:href="@{/style.css}">

</head>
<body>
<script type="text/javascript" src="https://static.filestackapi.com/v3/filestack.js"></script>

<nav th:replace=" partials/can-nav :: can-nav"/>

<div class="">
    <div class="container">

        <div>
            <h1 class="">Upload Your Work</h1>
        </div>

        <div class="container mb-4">
            <form th:action="@{/canvas-upload}" method="POST" th:object="${image}">

                <label for="uploadImage"></label>
                <button class="form-control mb-4" id="uploadImage" name="uploadImage" type="button">Upload Image</button>
                <input id="filestackImageUrl" name="filestackImageUrl" value="replace" th:field="*{imageUrl}" type="hidden">

                <label for="comment">Comment</label>
                <input id="comment" th:field="*{comment}" class="form-control mb-4"
                       placeholder="Wanna leave a comment about the piece?"/>

                <label for="creditedArtist">Artist Name</label>
                <input id="creditedArtist" th:field="*{creditedArtist}" class="form-control mb-4"
                       placeholder="Artist Name"/>

                <label for="studioName">Studio Name</label>
                <input id="studioName" th:field="*{studioName}" class="form-control mb-4" placeholder="Studio Name"/>

                <label>What style is this work?</label>
                <div th:replace=" partials/style-list :: style-list"/>

                <input class="btn btn-block" value="Add new work" type="submit"/>
            </form>
        </div>

    </div>
</div>

<footer th:replace="partials/foot :: foot"/>
<script type="text/javascript" src="//static.filestackapi.com/filestack-js/3.x.x/filestack.min.js"></script>
<script th:inline="javascript">
    const options = {
        onUploadDone:
            function (result) {
                $("#filestackImageUrl").val(result.filesUploaded[0].url);
            }
    }
    let filestackApiKey = [[${filestackApiKey}]]
    const client = filestack.init(filestackApiKey);

    $("#uploadImage").click(function () {
        client.picker(options).open()
    });
</script>

</body>
</html>